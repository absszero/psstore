<?php
namespace Tests\Patterns;

use Absszero\Trify\Patterns\Esunbank;

class EsunbankTest extends \Tests\TestCase
{
    public function testParse()
    {
        $pattern = new Esunbank;
        $meta = $pattern->parse('url', $this->body());
        $this->assertEquals('美元(USD)', $meta->title);
        $this->assertEquals('30.865', $meta->price);
    }

    protected function body()
    {
        return '{"d":"{\"Rates\":[{\"Name\":\"美元\",\"BBoardRate\":30.8,\"SBoardRate\":30.9,\"CashBBoardRate\":\"30.6\",\"CashSBoardRate\":\"31.1\",\"BuyIncreaseRate\":\"30.835\",\"SellDecreaseRate\":\"30.865\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"USD/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/usd.png\",\"Description\":null,\"Alt\":\"美元\",\"Title\":\"美元(USD)\",\"Key\":\"USD\",\"CashBonus\":\"0.05\",\"Bonus\":\"0.035\",\"Serial\":2},{\"Name\":\"人民幣\",\"BBoardRate\":4.567,\"SBoardRate\":4.617,\"CashBBoardRate\":\"4.502\",\"CashSBoardRate\":\"4.652\",\"BuyIncreaseRate\":\"4.587\",\"SellDecreaseRate\":\"4.597\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"CNY/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/cny.png\",\"Description\":null,\"Alt\":\"人民幣\",\"Title\":\"人民幣(CNY)\",\"Key\":\"CNY\",\"CashBonus\":\"0.02\",\"Bonus\":\"0.02\",\"Serial\":3},{\"Name\":\"港幣\",\"BBoardRate\":3.9,\"SBoardRate\":3.96,\"CashBBoardRate\":\"3.87\",\"CashSBoardRate\":\"3.99\",\"BuyIncreaseRate\":\"3.923\",\"SellDecreaseRate\":\"3.937\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"HKD/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/hkd.png\",\"Description\":null,\"Alt\":\"港幣\",\"Title\":\"港幣(HKD)\",\"Key\":\"HKD\",\"CashBonus\":\"0.02\",\"Bonus\":\"0.023\",\"Serial\":4},{\"Name\":\"日圓\",\"BBoardRate\":0.2738,\"SBoardRate\":0.2778,\"CashBBoardRate\":\"0.2728\",\"CashSBoardRate\":\"0.2798\",\"BuyIncreaseRate\":\"0.2751\",\"SellDecreaseRate\":\"0.2765\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"JPY/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/jpy.png\",\"Description\":null,\"Alt\":\"日圓\",\"Title\":\"日圓(JPY)\",\"Key\":\"JPY\",\"CashBonus\":\"0.001\",\"Bonus\":\"0.0013\",\"Serial\":5},{\"Name\":\"歐元\",\"BBoardRate\":34.67,\"SBoardRate\":35.07,\"CashBBoardRate\":\"34.37\",\"CashSBoardRate\":\"35.37\",\"BuyIncreaseRate\":\"34.8\",\"SellDecreaseRate\":\"34.94\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"EUR/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/eur.png\",\"Description\":null,\"Alt\":\"歐元\",\"Title\":\"歐元(EUR)\",\"Key\":\"EUR\",\"CashBonus\":\"\",\"Bonus\":\"0.13\",\"Serial\":6},{\"Name\":\"澳幣\",\"BBoardRate\":21.58,\"SBoardRate\":21.78,\"CashBBoardRate\":\"21.28\",\"CashSBoardRate\":\"22.08\",\"BuyIncreaseRate\":\"21.64\",\"SellDecreaseRate\":\"21.72\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"AUD/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/aud.jpg\",\"Description\":null,\"Alt\":\"澳幣\",\"Title\":\"澳幣(AUD)\",\"Key\":\"AUD\",\"CashBonus\":\"\",\"Bonus\":\"0.06\",\"Serial\":7},{\"Name\":\"加拿大幣\",\"BBoardRate\":22.96,\"SBoardRate\":23.14,\"CashBBoardRate\":\"22.65\",\"CashSBoardRate\":\"23.45\",\"BuyIncreaseRate\":\"23.01\",\"SellDecreaseRate\":\"23.09\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"CAD/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/cad.png\",\"Description\":null,\"Alt\":\"加拿大幣\",\"Title\":\"加拿大幣(CAD)\",\"Key\":\"CAD\",\"CashBonus\":\"\",\"Bonus\":\"0.05\",\"Serial\":8},{\"Name\":\"英鎊\",\"BBoardRate\":40.35,\"SBoardRate\":40.75,\"CashBBoardRate\":\"40.05\",\"CashSBoardRate\":\"41.05\",\"BuyIncreaseRate\":\"40.48\",\"SellDecreaseRate\":\"40.62\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"GBP/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/gbp.png\",\"Description\":null,\"Alt\":\"英鎊\",\"Title\":\"英鎊(GBP)\",\"Key\":\"GBP\",\"CashBonus\":\"\",\"Bonus\":\"0.13\",\"Serial\":9},{\"Name\":\"南非幣\",\"BBoardRate\":2.122,\"SBoardRate\":2.222,\"CashBBoardRate\":\"\",\"CashSBoardRate\":\"\",\"BuyIncreaseRate\":\"2.147\",\"SellDecreaseRate\":\"2.197\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"ZAR/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/zar.png\",\"Description\":null,\"Alt\":\"南非幣\",\"Title\":\"南非幣(ZAR)\",\"Key\":\"ZAR\",\"CashBonus\":\"\",\"Bonus\":\"0.025\",\"Serial\":10},{\"Name\":\"紐西蘭幣\",\"BBoardRate\":20.78,\"SBoardRate\":21.02,\"CashBBoardRate\":\"\",\"CashSBoardRate\":\"\",\"BuyIncreaseRate\":\"20.84\",\"SellDecreaseRate\":\"20.96\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"NZD/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/nzd.png\",\"Description\":null,\"Alt\":\"紐西蘭幣\",\"Title\":\"紐西蘭幣(NZD)\",\"Key\":\"NZD\",\"CashBonus\":\"\",\"Bonus\":\"0.06\",\"Serial\":11},{\"Name\":\"瑞士法郎\",\"BBoardRate\":30.59,\"SBoardRate\":30.79,\"CashBBoardRate\":\"\",\"CashSBoardRate\":\"\",\"BuyIncreaseRate\":\"30.65\",\"SellDecreaseRate\":\"30.73\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"CHF/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/chf.png\",\"Description\":null,\"Alt\":\"瑞士法郎\",\"Title\":\"瑞士法郎(CHF)\",\"Key\":\"CHF\",\"CashBonus\":\"\",\"Bonus\":\"0.06\",\"Serial\":12},{\"Name\":\"瑞典幣\",\"BBoardRate\":3.278,\"SBoardRate\":3.338,\"CashBBoardRate\":\"\",\"CashSBoardRate\":\"\",\"BuyIncreaseRate\":\"3.293\",\"SellDecreaseRate\":\"3.323\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"SEK/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/sek.png\",\"Description\":null,\"Alt\":\"瑞典幣\",\"Title\":\"瑞典幣(SEK)\",\"Key\":\"SEK\",\"CashBonus\":\"\",\"Bonus\":\"0.015\",\"Serial\":13},{\"Name\":\"新加坡幣\",\"BBoardRate\":22.63,\"SBoardRate\":22.79,\"CashBBoardRate\":\"\",\"CashSBoardRate\":\"\",\"BuyIncreaseRate\":\"22.68\",\"SellDecreaseRate\":\"22.74\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"SGD/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/sgd.png\",\"Description\":null,\"Alt\":\"新加坡幣\",\"Title\":\"新加坡幣(SGD)\",\"Key\":\"SGD\",\"CashBonus\":\"\",\"Bonus\":\"0.05\",\"Serial\":14},{\"Name\":\"墨西哥披索\",\"BBoardRate\":1.559,\"SBoardRate\":1.639,\"CashBBoardRate\":\"\",\"CashSBoardRate\":\"\",\"BuyIncreaseRate\":\"1.589\",\"SellDecreaseRate\":\"1.609\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"MXN/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/mxn.png\",\"Description\":null,\"Alt\":\"墨西哥披索\",\"Title\":\"墨西哥披索(MXN)\",\"Key\":\"MXN\",\"CashBonus\":\"\",\"Bonus\":\"0.03\",\"Serial\":15},{\"Name\":\"泰銖\",\"BBoardRate\":0.948,\"SBoardRate\":0.988,\"CashBBoardRate\":\"\",\"CashSBoardRate\":\"\",\"BuyIncreaseRate\":\"0.961\",\"SellDecreaseRate\":\"0.975\",\"UpdateTime\":\"2019-03-06T21:25:43\",\"CCY\":\"THB/TWD\",\"Url\":\"-/media/esunbank/images/common/flags/thb.png\",\"Description\":null,\"Alt\":\"泰銖\",\"Title\":\"泰銖(THB)\",\"Key\":\"THB\",\"CashBonus\":\"\",\"Bonus\":\"0.013\",\"Serial\":16}],\"QuoteTime\":\"2019年03月06日 21:26:25\"}"}';
    }
}
